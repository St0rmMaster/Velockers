# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç—å—é –≥—Ä—É–ø–ø –æ–±—ä–µ–∫—Ç–æ–≤

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç—å—é 3D-–≥—Ä—É–ø–ø –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `src/components/BoatViewer.tsx`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `useEffect` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `BoatModel` (—Å—Ç—Ä–æ–∫–∏ 247-264):

```typescript
// Apply custom group visibility mappings
const mapping = groupVisibilityMappings.find(m => m.groupName === childName);
if (mapping) {
  if (mapping.hiddenByDefault) {
    // If group is hidden by default and linked to an option
    if (mapping.linkedOptionId) {
      // Show only if the linked option is selected
      const isOptionSelected = selectedOptions.includes(mapping.linkedOptionId);
      setGroupVisibility(child, isOptionSelected);
    } else {
      // Hidden by default with no linked option - always hide
      setGroupVisibility(child, false);
    }
  } else {
    // Not hidden by default - always show
    setGroupVisibility(child, true);
  }
}
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ì—Ä—É–ø–ø–∞ —Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é + –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –æ–ø—Ü–∏–∏**
   - –ì—Ä—É–ø–ø–∞ –≤–∏–¥–∏–º–∞ –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ –æ–ø—Ü–∏—è –≤—ã–±—Ä–∞–Ω–∞
   - –°–Ω—è—Ç–∏–µ –≥–∞–ª–æ—á–∫–∏ —Å –æ–ø—Ü–∏–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø—É
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–∞–ª–æ—á–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø—É

2. **–ì—Ä—É–ø–ø–∞ —Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é + –ù–ï–¢ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–ø—Ü–∏–∏**
   - –ì—Ä—É–ø–ø–∞ –≤—Å–µ–≥–¥–∞ —Å–∫—Ä—ã—Ç–∞

3. **–ì—Ä—É–ø–ø–∞ –ù–ï —Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
   - –ì—Ä—É–ø–ø–∞ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º–∞ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ–ø—Ü–∏–π)

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Visualization Sandbox

1. –û—Ç–∫—Ä–æ–π—Ç–µ Dev Settings Page (–æ–±—ã—á–Ω–æ `/dev-settings`)
2. –í —Ä–∞–∑–¥–µ–ª–µ "Group Visibility" –Ω–∞–π–¥–∏—Ç–µ –≥—Ä—É–ø–ø—É `non_slip`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - ‚úÖ –í–∫–ª—é—á–∏—Ç–µ "Hidden by default"
   - –í –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ "Link to catalog option" –≤—ã–±–µ—Ä–∏—Ç–µ "Soft deck"
4. –ù–∞–∂–º–∏—Ç–µ "üíæ Save Group Visibility Settings"

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä (`/`)
2. **–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
   - –ì—Ä—É–ø–ø–∞ `non_slip` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å **—Å–∫—Ä—ã—Ç–∞** (—Ç.–∫. –æ–ø—Ü–∏—è –Ω–µ –≤—ã–±—Ä–∞–Ω–∞)
3. **–í–∫–ª—é—á–µ–Ω–∏–µ –æ–ø—Ü–∏–∏:**
   - –í —Ä–∞–∑–¥–µ–ª–µ "Options" –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É –Ω–∞ "Soft deck"
   - –ì—Ä—É–ø–ø–∞ `non_slip` –¥–æ–ª–∂–Ω–∞ **–ø–æ—è–≤–∏—Ç—å—Å—è**
4. **–í—ã–∫–ª—é—á–µ–Ω–∏–µ –æ–ø—Ü–∏–∏:**
   - –°–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É —Å "Soft deck"
   - –ì—Ä—É–ø–ø–∞ `non_slip` –¥–æ–ª–∂–Ω–∞ **–∏—Å—á–µ–∑–Ω—É—Ç—å**

### –ü—Ä–∏–º–µ—Ä —Å –¥—Ä—É–≥–∏–º–∏ –≥—Ä—É–ø–ø–∞–º–∏

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –≥—Ä—É–ø–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤:
- `telescopic_oars` ‚Üí –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ "Telescopic aluminum oars"
- `rod_holder` ‚Üí –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ "Rod holder"
- `bilge_pump` ‚Üí –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ "Electric bilge pump"
- –∏ —Ç.–¥.

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –≥—Ä—É–ø–ø—ã

–°–ª–µ–¥—É—é—â–∏–µ –≥—Ä—É–ø–ø—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∏–ø—É –º–æ–¥–µ–ª–∏ (–Ω–µ —á–µ—Ä–µ–∑ Sandbox):
- `el_motor` - –≤–∏–¥–∏–º —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–¥–µ–ª—è—Ö E (—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö)
- `battary_V_4_new` - –≤–∏–¥–∏–º–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–¥–µ–ª—è—Ö E (—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö)

–≠—Ç–∏ –≥—Ä—É–ø–ø—ã –Ω–µ–ª—å–∑—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ Visualization Sandbox.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (visualization_settings)

```json
{
  "settings_type": "groups",
  "settings_data": {
    "mappings": [
      {
        "groupName": "non_slip",
        "hiddenByDefault": true,
        "linkedOptionId": "soft-deck"
      }
    ]
  },
  "is_active": true
}
```

### –ü–µ—Ä–µ–¥–∞—á–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
// App.tsx
<BoatViewer
  // ... –¥—Ä—É–≥–∏–µ props
  groupVisibilityMappings={groupVisibilityMappings}
  selectedOptions={configuration.optionIds}
/>
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
console.log('Group visibility mappings:', groupVisibilityMappings);

// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏
console.log('Selected options:', configuration.optionIds);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Three.js Inspector

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ "Three.js Inspector"
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä
3. –ù–∞–π–¥–∏—Ç–µ –≥—Ä—É–ø–ø—É `non_slip` –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Å—Ü–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–π—Å—Ç–≤–æ `visible` –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏/–≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –æ–ø—Ü–∏–∏

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ì—Ä—É–ø–ø–∞ –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è/–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Sandbox
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

### –ì—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –ò–º—è –≥—Ä—É–ø–ø—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–µ–Ω–µ–º –≤ 3D-–º–æ–¥–µ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Dev Settings Page
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω–æ–µ –∏–º—è –≥—Ä—É–ø–ø—ã –≤ –¥–µ—Ä–µ–≤–µ –æ–±—ä–µ–∫—Ç–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–Ω–æ–µ –∏–º—è (—Å —É—á–µ—Ç–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞)

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ –≤ –∫–µ—à–µ –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Delete)
2. –°–¥–µ–ª–∞–π—Ç–µ "–∂–µ—Å—Ç–∫—É—é" –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É (Ctrl+Shift+R)

## –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:** –≥—Ä—É–ø–ø–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø—Ü–∏–π (–ò/–ò–õ–ò –ª–æ–≥–∏–∫–∞)
2. **–ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è:** –ø–ª–∞–≤–Ω–æ–µ fade in/out
3. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤ Sandbox:** –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å/—Å–∫—Ä—ã–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –æ–ø—Ü–∏—é
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è linkedOptionId –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
5. **UI –∏–Ω–¥–∏–∫–∞—Ü–∏—è:** –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ, —á—Ç–æ –æ–ø—Ü–∏—è –≤–ª–∏—è–µ—Ç –Ω–∞ 3D-–º–æ–¥–µ–ª—å

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **React Hooks:** useEffect —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ `[scene, isElectricModel, groupVisibilityMappings, selectedOptions]`
- **Three.js:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `object.traverse()` –¥–ª—è –æ–±—Ö–æ–¥–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Å—Ü–µ–Ω—ã
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–µ–Ω–µ–π:** –ü—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ –æ–±—ä–µ–∫—Ç–∞ —Ç–∞–∫–∂–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è `castShadow`
- **Depth masks:** –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è WATER_OCCLUDER –æ–±—ä–µ–∫—Ç–æ–≤

