# –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –≥—Ä—É–ø–ø –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ

## üéØ –ó–∞–¥–∞—á–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–∏–¥–∏–º–æ—Å—Ç–∏ 3D-–≥—Ä—É–ø–ø –∏–∑ Visualization Sandbox –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ. –ì—Ä—É–ø–ø—ã, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ "Hidden by default" –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–ø—Ü–∏—è–º–∏, –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è/–∏—Å—á–µ–∑–∞—Ç—å –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏/–≤—ã–∫–ª—é—á–µ–Ω–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –æ–ø—Ü–∏–π.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ö–æ–¥ (BoatViewer.tsx)

**–§–∞–π–ª:** `src/components/BoatViewer.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 247-264

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `groupVisibilityMappings`:

```typescript
// Apply custom group visibility mappings
const mapping = groupVisibilityMappings.find(m => m.groupName === childName);
if (mapping) {
  if (mapping.hiddenByDefault) {
    if (mapping.linkedOptionId) {
      // Show only if the linked option is selected
      const isOptionSelected = selectedOptions.includes(mapping.linkedOptionId);
      setGroupVisibility(child, isOptionSelected);
    } else {
      // Hidden by default with no linked option - always hide
      setGroupVisibility(child, false);
    }
  } else {
    // Not hidden by default - always show
    setGroupVisibility(child, true);
  }
}
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useEffect –æ–±–Ω–æ–≤–ª–µ–Ω—ã:**
```typescript
}, [scene, isElectricModel, groupVisibilityMappings, selectedOptions]);
```

### 2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω—ã –¥–≤–∞ —Ñ–∞–π–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

1. **GROUP_VISIBILITY_IMPLEMENTATION.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

2. **GROUP_VISIBILITY_QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
   - –¢–∞–±–ª–∏—Ü–∞ —Å –ª–æ–≥–∏–∫–æ–π —Ä–∞–±–æ—Ç—ã
   - –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —É—Å–ø–µ—à–Ω–∞ (`npm run build`)  
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ TypeScript  
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞  
‚úÖ –í—Å–µ —Ç–∏–ø—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–∏–º–µ—Ä: –≥—Ä—É–ø–ø–∞ `non_slip` –∏ –æ–ø—Ü–∏—è "Soft deck"

1. **–í Visualization Sandbox:**
   - –í—ã–±–∏—Ä–∞–µ–º –≥—Ä—É–ø–ø—É `non_slip`
   - –°—Ç–∞–≤–∏–º –≥–∞–ª–æ—á–∫—É "Hidden by default"
   - –°–≤—è–∑—ã–≤–∞–µ–º —Å –æ–ø—Ü–∏–µ–π "Soft deck"
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

2. **–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ:**
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `non_slip` —Å–∫—Ä—ã—Ç
   - –í–∫–ª—é—á–∞–µ–º "Soft deck" ‚Üí `non_slip` –ø–æ—è–≤–ª—è–µ—Ç—Å—è
   - –í—ã–∫–ª—é—á–∞–µ–º "Soft deck" ‚Üí `non_slip` –∏—Å—á–µ–∑–∞–µ—Ç

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
[Visualization Sandbox] 
    ‚Üì saves to
[Supabase: visualization_settings]
    ‚Üì loads on mount
[App.tsx: groupVisibilityMappings state]
    ‚Üì passes as prop
[BoatViewer ‚Üí BoatWithRocking ‚Üí BoatModel]
    ‚Üì applies in useEffect
[Three.js Scene: group.visible = true/false]
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

```javascript
// –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
console.log('Mappings:', groupVisibilityMappings);

// –í—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏
console.log('Selected:', configuration.optionIds);
```

### Visual —Ç–µ—Å—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä
2. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é soft deck –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω
3. –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É –Ω–∞ "Soft deck" –≤ –æ–ø—Ü–∏—è—Ö
4. Soft deck –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞ 3D-–º–æ–¥–µ–ª–∏
5. –°–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É
6. Soft deck –¥–æ–ª–∂–µ–Ω –∏—Å—á–µ–∑–Ω—É—Ç—å

## üì¶ Git

**–ö–æ–º–º–∏—Ç:** `19d3d36`  
**–°–æ–æ–±—â–µ–Ω–∏–µ:** `feat: implement group visibility control based on selected options`  
**–§–∞–π–ª—ã:**
- Modified: `src/components/BoatViewer.tsx` (+19 lines)
- Added: `GROUP_VISIBILITY_IMPLEMENTATION.md`
- Added: `GROUP_VISIBILITY_QUICKSTART.md`

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è**
   - –ì—Ä—É–ø–ø–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø—Ü–∏–π
   - –õ–æ–≥–∏–∫–∞ AND/OR

2. **–ê–Ω–∏–º–∞—Ü–∏—è**
   - –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
   - Fade in/out —ç—Ñ—Ñ–µ–∫—Ç—ã

3. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤ Sandbox**
   - –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ü–∏–π
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä

4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è linkedOptionId
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–ø—Ü–∏—è—Ö

5. **UI –∏–Ω–¥–∏–∫–∞—Ü–∏—è**
   - –ò–∫–æ–Ω–∫–∞ üé® —Ä—è–¥–æ–º —Å –æ–ø—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è –≤–ª–∏—è–µ—Ç –Ω–∞ 3D
   - –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## ‚ú® –ò—Ç–æ–≥

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω**. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ Visualization Sandbox —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ. –ì—Ä—É–ø–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è/—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ–ø—Ü–∏–π.

---

**–î–∞—Ç–∞:** 29 –æ–∫—Ç—è–±—Ä—è 2025  
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** Claude (Anthropic)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETE

