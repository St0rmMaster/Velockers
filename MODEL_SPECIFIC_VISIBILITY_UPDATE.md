# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≥—Ä—É–ø–ø –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ú–æ–¥–µ–ª–∏ 2.9 –∏ 3.3 –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—à–µ–π, –Ω–æ —ç—Ç–∏ –º–µ—à–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Ä–∞–∑–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º:
- –ù–∞ –º–æ–¥–µ–ª–∏ 2.9: mesh "pump_handle" ‚Üí –Ω–∞—Å–æ—Å (bilge pump)
- –ù–∞ –º–æ–¥–µ–ª–∏ 3.3: mesh "pump_handle" ‚Üí —Ä—É—á–∫–∞ (handle)

–ö–æ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ã–ª–∏ –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π, –≤–∫–ª—é—á–µ–Ω–∏–µ –æ–ø—Ü–∏–∏ "bilge pump" –Ω–∞ –º–æ–¥–µ–ª–∏ 3.3 –æ—Ç–∫–ª—é—á–∞–ª–æ –Ω–µ –ø–æ–º–ø—É, –∞ —Ä—É—á–∫—É.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≥—Ä—É–ø–ø —Ç–µ–ø–µ—Ä—å **–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏**.

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

#### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–ë—ã–ª–æ:**
```typescript
interface GroupVisibilityMapping {
  groupName: string;
  hiddenByDefault: boolean;
  linkedOptionId?: string;
}
```

**–°—Ç–∞–ª–æ:**
```typescript
interface GroupVisibilityMapping {
  groupName: string;
  modelId: string; // '2.9', '2.9E', '3.3', '3.3E'
  hiddenByDefault: boolean;
  linkedOptionId?: string;
}
```

#### 2. –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏**:

```typescript
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏
const mapping = groupVisibilityMappings.find(
  m => m.groupName === childName && m.modelId === modelId
);
```

#### 3. UI –≤ Visualization Sandbox

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –º–æ–¥–µ–ª—å: "Hidden by default (for model 2.9)"
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Visualization Sandbox** (`/dev-settings`)

2. **–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.9)

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø—ã** –¥–ª—è —ç—Ç–æ–π –º–æ–¥–µ–ª–∏:
   - –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É `non_slip`
   - ‚úÖ Hidden by default (for model 2.9)
   - Link to option: "Soft deck"

4. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3.3)

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø—ã** –¥–ª—è –º–æ–¥–µ–ª–∏ 3.3:
   - –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É `pump`
   - ‚úÖ Hidden by default (for model 3.3)
   - Link to option: "Electric bilge pump"

6. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (–∫–Ω–æ–ø–∫–∞ "üíæ Save")

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

–í –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —Å–µ–∫—Ü–∏–∏ "Group Visibility" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å:

```
‚ö†Ô∏è Model-Specific Settings
Currently editing: Model 2.9
Settings are isolated per model.

[üóëÔ∏è Reset 2.9 (3)]  [üóëÔ∏è Reset 2.9E (0)]  
[üóëÔ∏è Reset 3.3 (5)]  [üóëÔ∏è Reset 3.3E (0)]
```

- –ß–∏—Å–ª–æ –≤ —Å–∫–æ–±–∫–∞—Ö ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø –¥–ª—è –º–æ–¥–µ–ª–∏
- –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞, –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —ç—Ç–æ–π –º–æ–¥–µ–ª–∏
- –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏

### –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥–µ–ª–∏ 3.3

–ö–∞–∫ –∑–∞–ø—Ä–æ—Å–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/dev-settings`
2. –í —Å–µ–∫—Ü–∏–∏ "Group Visibility" –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑
3. –ù–∞–π–¥–∏—Ç–µ –ø–∞–Ω–µ–ª—å "Model-Specific Settings"
4. –ù–∞–∂–º–∏—Ç–µ **"üóëÔ∏è Reset 3.3"**
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ
6. –ù–∞–∂–º–∏—Ç–µ **"üíæ Save Group Visibility Settings"**

–ì–æ—Ç–æ–≤–æ! –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º–æ–¥–µ–ª–∏ 3.3 —Å–±—Ä–æ—à–µ–Ω—ã –¥–æ –¥–µ—Ñ–æ–ª—Ç–∞.

## üîß –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `016_add_modelid_to_group_visibility.sql`:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `modelId: '2.9'` –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
- –í—Å–µ —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –º–æ–¥–µ–ª–∏ 2.9
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd exce1sior-configurator/supabase
supabase db reset
# –∏–ª–∏
supabase migration up
```

## üìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö

### –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏
```json
{
  "mappings": [
    {
      "groupName": "non_slip",
      "hiddenByDefault": true,
      "linkedOptionId": "soft-deck"
    }
  ]
}
```

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```json
{
  "mappings": [
    {
      "groupName": "non_slip",
      "modelId": "2.9",
      "hiddenByDefault": true,
      "linkedOptionId": "soft-deck"
    }
  ]
}
```

### –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è 3.3
```json
{
  "mappings": [
    {
      "groupName": "non_slip",
      "modelId": "2.9",
      "hiddenByDefault": true,
      "linkedOptionId": "soft-deck"
    },
    {
      "groupName": "pump",
      "modelId": "3.3",
      "hiddenByDefault": true,
      "linkedOptionId": "electric-bilge-pump"
    }
  ]
}
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –ú–æ–¥–µ–ª—å 2.9

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä
2. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å **2.9**
3. –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é "Soft deck"
4. ‚úÖ –ì—Ä—É–ø–ø–∞ `non_slip` –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è

### –¢–µ—Å—Ç 2: –ú–æ–¥–µ–ª—å 3.3

1. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å **3.3**
2. –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é "Soft deck"
3. ‚ùå –ì—Ä—É–ø–ø–∞ `non_slip` –ù–ï –¥–æ–ª–∂–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è (–Ω–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è 3.3)

### –¢–µ—Å—Ç 3: –ò–∑–æ–ª—è—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø—É –¥–ª—è –º–æ–¥–µ–ª–∏ 2.9
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –º–æ–¥–µ–ª—å 3.3
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è 2.9 –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ 3.3

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ö–æ–¥

1. **src/types/index.ts**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `modelId` –≤ `GroupVisibilityMapping`

2. **src/components/BoatViewer.tsx**
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `modelId` –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –∑–∞—â–∏—Ç–µ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

3. **src/pages/DevSettingsPage.tsx**
   - –§—É–Ω–∫—Ü–∏–∏ `handleGroupHiddenChange` –∏ `handleGroupOptionChange` —Ä–∞–±–æ—Ç–∞—é—Ç —Å `modelId`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleResetModelSettings`
   - UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –º–æ–¥–µ–ª—å –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏

### –ú–∏–≥—Ä–∞—Ü–∏–∏

4. **supabase/migrations/016_add_modelid_to_group_visibility.sql**
   - –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `modelId: '2.9'` –∫ —Å—Ç–∞—Ä—ã–º –∑–∞–ø–∏—Å—è–º

## üöÄ –°—Ç–∞—Ç—É—Å

‚úÖ **–ì–û–¢–û–í–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**

- –ö–æ–¥ –æ–±–Ω–æ–≤–ª—ë–Ω
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ (–±–µ–∑ –æ—à–∏–±–æ–∫ TypeScript)
- –õ–∏–Ω—Ç–µ—Ä –Ω–µ –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–æ–∫
- UI –æ–±–Ω–æ–≤–ª—ë–Ω —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Å–±—Ä–æ—Å–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [GROUP_VISIBILITY_IMPLEMENTATION.md](./GROUP_VISIBILITY_IMPLEMENTATION.md) - –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [GROUP_VISIBILITY_QUICKSTART.md](./GROUP_VISIBILITY_QUICKSTART.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

---

**–î–∞—Ç–∞:** 29 –æ–∫—Ç—è–±—Ä—è 2025  
**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** Model-specific visibility settings  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETE

